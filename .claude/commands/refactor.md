リファクタリングを実行します（TDD REFACTOR段階）。

## リファクタリングチェックリスト

以下の項目をチェックしながらコードを改善します：

### 1. DRY原則（Don't Repeat Yourself）
- [ ] 重複コードを関数/クラスに抽出
- [ ] 共通ロジックをユーティリティ化

### 2. 単一責任の原則
- [ ] 1つの関数は1つのことだけを行う
- [ ] 長い関数（20行以上）を分割

### 3. 命名の明確性
- [ ] 変数名が意図を表現している
- [ ] 関数名が動作を明確に示す
- [ ] マジックナンバーを定数化

### 4. コメントの適切性
- [ ] 複雑なロジックに説明を追加
- [ ] 不要なコメントを削除
- [ ] docstringを追加/更新

### 5. パフォーマンス
- [ ] 不要な計算やループを削除
- [ ] リスト内包表記の活用
- [ ] 早期リターンの活用

### 6. エラーハンドリング
- [ ] 適切な例外処理
- [ ] エラーメッセージの明確化
- [ ] バリデーションの追加

---

## 実行後の確認

リファクタリング後、必ずテストを実行してください：

```bash
pytest tests/
```

**重要**: すべてのテストがPASSすること（テストが壊れていないこと）

---

**どのファイルをリファクタリングしますか？**
